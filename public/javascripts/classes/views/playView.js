// Generated by CoffeeScript 1.7.1
(function() {
  App.PlayView = Ember.View.extend({
    templateName: "play",
    isLastFriend: false,
    init: function() {
      this._super();
      App.MainController.set("game", App.gameData.create());
      return this.updateFriend();
    },
    updateFriend: function() {
      var self;
      self = this;
      return App.MainController.getPhoto(function(error) {
        if (!error) {
          self.set("title", "Friend NÂ° " + App.MainController.game.counter + "/10: Spell My First Name");
          self.set("pictureURL", App.MainController.game.picture);
          self.set("inputName", "");
          return console.log("\nReal Name: " + App.MainController.user.friends[App.MainController.random].first_name);
        } else {
          alert(JSON.stringify(error));
          App.MainController.set("isLoggedIn", false);
          return self.get("controller").transitionToRoute("home");
        }
      });
    },
    actions: {
      nextFriend: function() {
        var self;
        self = this;
        return App.MainController.updateScore(this.inputName, function(gameOver) {
          if (!gameOver) {
            return self.updateFriend();
          } else {
            self.set("isLastFriend", true);
            return console.log("\nGAME OVER!");
          }
        });
      },
      goScore: function() {
        this.set("isLastFriend", false);
        return this.get("controller").transitionToRoute("score");
      }
    }
  });

}).call(this);
